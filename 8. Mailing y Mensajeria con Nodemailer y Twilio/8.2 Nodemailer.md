# Configuración y uso de Nodemailer

## Instrucciones para Configurar Nodemailer en un Servidor Express

A continuación, te explicamos cómo configurar Nodemailer para enviar correos electrónicos desde un servidor Express, incluyendo la instalación, autenticación con Gmail, y el uso de adjuntos e imágenes.

---

### 1. Instalación de Nodemailer

Primero, instala Nodemailer utilizando npm:

```bash
npm install nodemailer
```

Una vez instalado, importa Nodemailer en tu archivo principal (por ejemplo, `app.js`):

```js
const nodemailer = require("nodemailer");
```

---

### 2. Autenticación con Gmail

Para enviar correos desde una cuenta de Gmail, es necesario configurar una contraseña de aplicación, ya que Gmail no permite usar la contraseña personal para autenticación directa.

**Pasos:**

1. Habilita la autenticación en dos pasos en tu cuenta de Google.
2. Crea una contraseña de aplicación:
   - Ve a la configuración de tu cuenta de Google.
   - Genera una nueva contraseña de aplicación específica para Nodemailer.
   - Guarda esta contraseña, ya que no podrás verla nuevamente.

---

### 3. Configuración del Transporte

Configura el transporte de Nodemailer utilizando las credenciales de tu cuenta de Gmail:

```js
const transporter = nodemailer.createTransport({
  service: "gmail",
  auth: {
    user: "tu-email@gmail.com",
    pass: "tu-contraseña-de-aplicación", // La contraseña de aplicación generada
  },
});
```

---

### 4. Enviando un Correo Electrónico

Define los detalles del correo como remitente, destinatario, asunto y cuerpo:

```js
const mailOptions = {
  from: "tu-email@gmail.com",
  to: "destinatario@example.com",
  subject: "Asunto del correo",
  html: `
     <h1>Hola!</h1>
     <p>Este es un correo de prueba con Nodemailer.</p>
  `,
};
```

Para enviar el correo:

```js
transporter.sendMail(mailOptions, (error, info) => {
  if (error) {
    console.log("Error al enviar el correo:", error);
  } else {
    console.log("Correo enviado:", info.response);
  }
});
```

---

### 5. Uso de Attachments e Imágenes

Es posible adjuntar archivos e imágenes utilizando la propiedad `attachments`:

```js
const mailOptions = {
  from: "tu-email@gmail.com",
  to: "destinatario@example.com",
  subject: "Correo con adjuntos",
  html: `
     <p>Mira la imagen adjunta:</p>
     <img src="cid:imagen1" />
  `,
  attachments: [
    {
      filename: "documento.pdf",
      path: "./ruta/documento.pdf",
    },
    {
      filename: "imagen.png",
      path: "./ruta/imagen.png",
      cid: "imagen1", // cid se utiliza para incrustar la imagen en el HTML
    },
  ],
};
```

> **Nota:** Los `cid` permiten vincular imágenes dentro del HTML, evitando que aparezcan como adjuntos tradicionales.

---

## Resumen

Con estos pasos, habrás configurado correctamente Nodemailer en un servidor Express, habilitando la capacidad de enviar correos personalizados con imágenes y documentos adjuntos, mejorando la funcionalidad de tu aplicación backend.
