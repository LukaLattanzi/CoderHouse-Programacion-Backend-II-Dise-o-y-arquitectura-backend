# Desarrollo de Rutas, Controladores y Frontend

## Creación de Rutas y Controladores para Usuarios, Negocios y Órdenes

En la arquitectura de un servidor backend, los **routers** y **controladores** son fundamentales para organizar la lógica de las peticiones HTTP. A continuación, se describe cómo crear rutas y controladores para gestionar usuarios, negocios y órdenes, y cómo integrarlos con los **DAOs** (Data Access Objects).

---

### 1. Definición de Rutas y Controladores

Las rutas y controladores permiten manejar las peticiones entrantes y dirigirlas hacia las funciones adecuadas:

- **Usuarios:** Manejan la información de los clientes que realizan pedidos.
- **Negocios:** Gestionan los datos de los comercios que proveen productos.
- **Órdenes:** Controlan los pedidos realizados por los usuarios.

**Estructura Básica:**

- **Rutas:** Definen los endpoints del servidor y redirigen las peticiones al controlador correspondiente.
- **Controladores:** Contienen la lógica específica de cada operación y gestionan la interacción con los DAOs.

**Implementación:**

1. Crear un archivo de rutas para cada entidad (`usersRoutes.js`, `businessRoutes.js`, `ordersRoutes.js`).
2. Asociar cada ruta a un controlador que contenga las funciones necesarias (`getUser`, `createOrder`, etc.).
3. Importar y utilizar los controladores en las rutas para mantener el código limpio y organizado.

---

### 2. Conexión con DAOs

Los DAOs permiten la separación de la lógica de acceso a datos, proporcionando métodos para realizar operaciones CRUD sin acoplarse a una fuente de datos específica.

**Proceso:**

- **Implementar DAOs:** Crear clases DAO para cada entidad (`UserDAO`, `BusinessDAO`, `OrderDAO`) que contengan métodos como `get()`, `create()`, `update()`, y `delete()`.
- **Integrar DAOs en los controladores:** Importar los DAOs en los controladores y utilizarlos para interactuar con los datos, manteniendo la lógica de negocio aislada del acceso a datos.

---

### 3. Frontend Sencillo para Visualizar Órdenes

Para facilitar la interacción entre el backend y los usuarios, se implementa un frontend básico que muestra las órdenes almacenadas.

**Implementación:**

- **Archivos HTML y JS:** Crear un `index.html` y un `index.js`. El archivo JS hará peticiones al backend para obtener las órdenes.
- **Configuración del Servidor:** Utilizar Express para servir el frontend y recibir las peticiones desde el cliente.
- **Visualización de Datos:** Utilizar métodos como `fetch()` en `index.js` para realizar solicitudes al backend y mostrar las órdenes en la página web.

---

### 4. Solución de Problemas de CORS

Los errores de **CORS** (Cross-Origin Resource Sharing) ocurren cuando el frontend intenta acceder a recursos en un servidor de origen diferente.

**Solución:**

1. **Instalación de CORS:** Instalar la librería `cors` en el backend (`npm install cors`).
2. **Configuración en `app.js`:** Configurar el middleware de CORS para permitir solicitudes desde el origen específico del frontend.

   ```js
   const cors = require("cors");
   app.use(cors({ origin: "http://localhost:5500" }));
   ```

3. **Verificación:** Realizar pruebas para asegurar que las peticiones del frontend se gestionan correctamente sin bloqueos.

---

## Conclusión

Implementar rutas y controladores bien estructurados, conectarlos con DAOs y desarrollar un frontend sencillo mejora significativamente la gestión de datos y la experiencia del usuario. Además, la correcta configuración de CORS asegura una comunicación segura y funcional entre el frontend y el backend, clave para el desarrollo de aplicaciones web robustas y seguras.
